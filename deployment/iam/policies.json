{
  "InfographicGeneratorBedrockPolicy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "BedrockModelAccess",
        "Effect": "Allow",
        "Action": [
          "bedrock:InvokeModel",
          "bedrock:InvokeModelWithResponseStream"
        ],
        "Resource": [
          "arn:aws:bedrock:*::foundation-model/anthropic.claude-3-sonnet-20240229-v1:0",
          "arn:aws:bedrock:*::foundation-model/anthropic.claude-3-haiku-20240307-v1:0",
          "arn:aws:bedrock:*::foundation-model/amazon.nova-canvas-v1:0",
          "arn:aws:bedrock:*::foundation-model/amazon.titan-text-express-v1"
        ]
      },
      {
        "Sid": "BedrockAgentAccess",
        "Effect": "Allow",
        "Action": [
          "bedrock:GetAgent",
          "bedrock:InvokeAgent"
        ],
        "Resource": "*",
        "Condition": {
          "StringEquals": {
            "aws:RequestedRegion": ["us-east-1", "us-west-2"]
          }
        }
      }
    ]
  },
  "InfographicGeneratorS3Policy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "S3BucketAccess",
        "Effect": "Allow",
        "Action": [
          "s3:ListBucket",
          "s3:GetBucketLocation",
          "s3:GetBucketVersioning"
        ],
        "Resource": "arn:aws:s3:::aws-infographic-generator-assets-*"
      },
      {
        "Sid": "S3ObjectAccess",
        "Effect": "Allow",
        "Action": [
          "s3:GetObject",
          "s3:PutObject",
          "s3:DeleteObject",
          "s3:GetObjectVersion",
          "s3:PutObjectAcl"
        ],
        "Resource": "arn:aws:s3:::aws-infographic-generator-assets-*/*"
      },
      {
        "Sid": "S3PublicUrlGeneration",
        "Effect": "Allow",
        "Action": [
          "s3:GetObjectAcl",
          "s3:PutObjectAcl"
        ],
        "Resource": "arn:aws:s3:::aws-infographic-generator-assets-*/generated/*"
      }
    ]
  },
  "InfographicGeneratorCloudWatchPolicy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "CloudWatchLogsAccess",
        "Effect": "Allow",
        "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents",
          "logs:DescribeLogGroups",
          "logs:DescribeLogStreams"
        ],
        "Resource": [
          "arn:aws:logs:*:*:log-group:/aws/infographic-generator/*",
          "arn:aws:logs:*:*:log-group:/aws/lambda/aws-infographic-generator-*"
        ]
      },
      {
        "Sid": "CloudWatchMetricsAccess",
        "Effect": "Allow",
        "Action": [
          "cloudwatch:PutMetricData",
          "cloudwatch:GetMetricStatistics",
          "cloudwatch:ListMetrics"
        ],
        "Resource": "*",
        "Condition": {
          "StringEquals": {
            "cloudwatch:namespace": "InfographicGenerator"
          }
        }
      }
    ]
  },
  "InfographicGeneratorLambdaPolicy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "LambdaBasicExecution",
        "Effect": "Allow",
        "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
        ],
        "Resource": "arn:aws:logs:*:*:*"
      },
      {
        "Sid": "VPCAccess",
        "Effect": "Allow",
        "Action": [
          "ec2:CreateNetworkInterface",
          "ec2:DescribeNetworkInterfaces",
          "ec2:DeleteNetworkInterface",
          "ec2:AttachNetworkInterface",
          "ec2:DetachNetworkInterface"
        ],
        "Resource": "*"
      }
    ]
  },
  "InfographicGeneratorECSPolicy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "ECSTaskExecution",
        "Effect": "Allow",
        "Action": [
          "ecr:GetAuthorizationToken",
          "ecr:BatchCheckLayerAvailability",
          "ecr:GetDownloadUrlForLayer",
          "ecr:BatchGetImage"
        ],
        "Resource": "*"
      },
      {
        "Sid": "ECSLogging",
        "Effect": "Allow",
        "Action": [
          "logs:CreateLogStream",
          "logs:PutLogEvents"
        ],
        "Resource": "arn:aws:logs:*:*:log-group:/ecs/aws-infographic-generator-*"
      }
    ]
  },
  "InfographicGeneratorDeveloperPolicy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "CloudFormationAccess",
        "Effect": "Allow",
        "Action": [
          "cloudformation:CreateStack",
          "cloudformation:UpdateStack",
          "cloudformation:DeleteStack",
          "cloudformation:DescribeStacks",
          "cloudformation:DescribeStackEvents",
          "cloudformation:DescribeStackResources",
          "cloudformation:GetTemplate",
          "cloudformation:ValidateTemplate"
        ],
        "Resource": "arn:aws:cloudformation:*:*:stack/aws-infographic-generator-*/*"
      },
      {
        "Sid": "IAMRoleManagement",
        "Effect": "Allow",
        "Action": [
          "iam:CreateRole",
          "iam:DeleteRole",
          "iam:GetRole",
          "iam:PassRole",
          "iam:AttachRolePolicy",
          "iam:DetachRolePolicy",
          "iam:PutRolePolicy",
          "iam:DeleteRolePolicy",
          "iam:GetRolePolicy"
        ],
        "Resource": [
          "arn:aws:iam::*:role/aws-infographic-generator-*",
          "arn:aws:iam::*:policy/aws-infographic-generator-*"
        ]
      },
      {
        "Sid": "LambdaManagement",
        "Effect": "Allow",
        "Action": [
          "lambda:CreateFunction",
          "lambda:DeleteFunction",
          "lambda:GetFunction",
          "lambda:UpdateFunctionCode",
          "lambda:UpdateFunctionConfiguration",
          "lambda:InvokeFunction"
        ],
        "Resource": "arn:aws:lambda:*:*:function:aws-infographic-generator-*"
      }
    ]
  }
}